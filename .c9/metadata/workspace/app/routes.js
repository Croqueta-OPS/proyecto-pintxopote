{"filter":false,"title":"routes.js","tooltip":"/app/routes.js","undoManager":{"mark":93,"position":93,"stack":[[{"group":"doc","deltas":[{"start":{"row":181,"column":2},"end":{"row":219,"column":7},"action":"remove","lines":["\t//Buscar el nombre de usuario que se ha introducido en el formulario ","\t\t\t\t\tUser.findOne({ 'nomUsuario' :  req.body.username }), function(err, user){","\t\t\t\t\t\t","\t\t\t\t\t\t\t//console.log(\"local.nomUsuario\"+local.nomUsuario);","\t\t\t\t\t\t\t//console.log(\"req.body.username\"+req.body.username);","\t\t\t\t\t\t","\t\t\t\t\t\t//si hay un usuario con ese nombre tendremos que mirar si es el mismo o un usuario diferente","\t\t\t\t\t\tif(user){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\t//si el ID no es el mismo es que ya existe un usuario con ese nombre","\t\t\t\t\t\t\tif(user.local._id != req.body.id){","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t//Aquí sacaríamos los mensajes de error","\t\t\t\t\t\t\t\t//return done(null, false, req.flash('signupMessage', 'Ese usuario ya existe.'));","\t\t\t\t\t\t\t\tconsole.log(\"Ese usuario ya existe\");","\t\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\tuser.local.nomUsuario = req.body.username;","\t\t\t\t\t\t\t\tconsole.log(\"Ese usuario esta libre\");","\t\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t","\t\t\t\t\t\t//Si no hay ningún usuario con ese nombre ","\t\t\t\t\t\t}else if(!user){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\tuser.local.nomUsuario = req.body.username;","\t\t\t\t\t\t\tconsole.log(\"Ese usuario libre\");","\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t","\t\t\t\t\t\t}else if(err){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\tconsole.log(err);","\t\t\t\t\t\t\t","\t\t\t\t\t\t}","\t\t\t\t\t\t","\t\t\t\t\t};"]}]}],[{"group":"doc","deltas":[{"start":{"row":177,"column":2},"end":{"row":178,"column":0},"action":"insert","lines":["",""]},{"start":{"row":178,"column":0},"end":{"row":178,"column":2},"action":"insert","lines":["\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":2},"end":{"row":178,"column":3},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":3},"end":{"row":178,"column":4},"action":"insert","lines":["f"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":4},"end":{"row":178,"column":5},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":5},"end":{"row":178,"column":7},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":6},"end":{"row":178,"column":7},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":7},"end":{"row":178,"column":8},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":8},"end":{"row":178,"column":9},"action":"insert","lines":["q"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":9},"end":{"row":178,"column":10},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":10},"end":{"row":178,"column":11},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":11},"end":{"row":178,"column":12},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":12},"end":{"row":178,"column":13},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":13},"end":{"row":178,"column":14},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":14},"end":{"row":178,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":15},"end":{"row":178,"column":16},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":16},"end":{"row":178,"column":17},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":17},"end":{"row":178,"column":18},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":18},"end":{"row":178,"column":19},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":19},"end":{"row":178,"column":20},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":20},"end":{"row":178,"column":21},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":21},"end":{"row":178,"column":22},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":22},"end":{"row":178,"column":23},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":23},"end":{"row":178,"column":24},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":24},"end":{"row":178,"column":25},"action":"insert","lines":["!"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":25},"end":{"row":178,"column":26},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":26},"end":{"row":178,"column":27},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":27},"end":{"row":178,"column":28},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":28},"end":{"row":178,"column":29},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":29},"end":{"row":178,"column":30},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":30},"end":{"row":178,"column":31},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":32},"end":{"row":178,"column":33},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":33},"end":{"row":178,"column":34},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":180,"column":56},"end":{"row":181,"column":0},"action":"insert","lines":["",""]},{"start":{"row":181,"column":0},"end":{"row":181,"column":2},"action":"insert","lines":["\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":2},"end":{"row":181,"column":3},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":180,"column":2},"end":{"row":180,"column":3},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":179,"column":2},"end":{"row":179,"column":3},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":180,"column":57},"end":{"row":181,"column":5},"action":"insert","lines":["","\t\t\tre"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":5},"end":{"row":181,"column":9},"action":"insert","lines":["dire"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":9},"end":{"row":181,"column":10},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":3},"end":{"row":181,"column":10},"action":"remove","lines":["redirec"]},{"start":{"row":181,"column":3},"end":{"row":181,"column":11},"action":"insert","lines":["redirect"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":3},"end":{"row":181,"column":7},"action":"insert","lines":["res."]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":15},"end":{"row":181,"column":17},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":16},"end":{"row":181,"column":18},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":17},"end":{"row":181,"column":18},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":18},"end":{"row":181,"column":21},"action":"insert","lines":["pro"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":21},"end":{"row":181,"column":23},"action":"insert","lines":["fi"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":23},"end":{"row":181,"column":25},"action":"insert","lines":["le"]}]}],[{"group":"doc","deltas":[{"start":{"row":181,"column":27},"end":{"row":181,"column":28},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":182,"column":2},"end":{"row":182,"column":3},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":178,"column":2},"end":{"row":178,"column":34},"action":"remove","lines":["if (req.body.username != null) {"]}]}],[{"group":"doc","deltas":[{"start":{"row":179,"column":0},"end":{"row":179,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":180,"column":0},"end":{"row":180,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":181,"column":0},"end":{"row":181,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":40},"end":{"row":22,"column":41},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":41},"end":{"row":22,"column":42},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":38},"end":{"row":22,"column":39},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":41},"end":{"row":22,"column":43},"action":"insert","lines":["ca"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":42},"end":{"row":22,"column":43},"action":"remove","lines":["a"]},{"start":{"row":22,"column":42},"end":{"row":22,"column":44},"action":"insert","lines":["la"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":44},"end":{"row":22,"column":46},"action":"insert","lines":["se"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":46},"end":{"row":22,"column":47},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":47},"end":{"row":22,"column":48},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":47},"end":{"row":22,"column":48},"action":"remove","lines":[" "]},{"start":{"row":22,"column":47},"end":{"row":22,"column":49},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":48},"end":{"row":22,"column":51},"action":"insert","lines":["esc"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":51},"end":{"row":22,"column":53},"action":"insert","lines":["on"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":53},"end":{"row":22,"column":57},"action":"insert","lines":["dido"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":70},"end":{"row":17,"column":72},"action":"insert","lines":[", "]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":72},"end":{"row":17,"column":76},"action":"insert","lines":["clas"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":76},"end":{"row":17,"column":78},"action":"insert","lines":["e:"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":78},"end":{"row":17,"column":80},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":79},"end":{"row":17,"column":81},"action":"insert","lines":["vi"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":81},"end":{"row":17,"column":85},"action":"insert","lines":["sibl"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":85},"end":{"row":17,"column":86},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":72},"end":{"row":17,"column":73},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":70},"end":{"row":17,"column":71},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":79},"end":{"row":17,"column":80},"action":"insert","lines":[" "]},{"start":{"row":17,"column":81},"end":{"row":17,"column":82},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":82},"end":{"row":17,"column":83},"action":"remove","lines":["\""]},{"start":{"row":17,"column":82},"end":{"row":17,"column":83},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":90},"end":{"row":17,"column":91},"action":"remove","lines":["\""]},{"start":{"row":17,"column":90},"end":{"row":17,"column":91},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":39},"end":{"row":22,"column":59},"action":"remove","lines":[", clase:\"escondido\"}"]},{"start":{"row":22,"column":39},"end":{"row":22,"column":60},"action":"insert","lines":[", {clase : 'visible'}"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":51},"end":{"row":22,"column":58},"action":"remove","lines":["visible"]},{"start":{"row":22,"column":51},"end":{"row":22,"column":54},"action":"insert","lines":["esc"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":54},"end":{"row":22,"column":58},"action":"insert","lines":["ondi"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":58},"end":{"row":22,"column":60},"action":"insert","lines":["do"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":37},"end":{"row":22,"column":39},"action":"remove","lines":["\"\""]},{"start":{"row":22,"column":37},"end":{"row":22,"column":39},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":39},"end":{"row":22,"column":40},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":71},"end":{"row":17,"column":74},"action":"remove","lines":[", {"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":70},"end":{"row":17,"column":71},"action":"remove","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":70},"end":{"row":17,"column":71},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":71},"end":{"row":17,"column":72},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":40},"end":{"row":22,"column":43},"action":"remove","lines":[", {"]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":39},"end":{"row":22,"column":40},"action":"remove","lines":["}"]},{"start":{"row":22,"column":39},"end":{"row":22,"column":40},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":22,"column":39},"end":{"row":22,"column":40},"action":"remove","lines":[" "]},{"start":{"row":22,"column":39},"end":{"row":22,"column":41},"action":"insert","lines":[", "]}]}],[{"group":"doc","deltas":[{"start":{"row":17,"column":37},"end":{"row":17,"column":45},"action":"remove","lines":["'Hola '+"]}]}],[{"group":"doc","deltas":[{"start":{"row":176,"column":1},"end":{"row":186,"column":4},"action":"remove","lines":["app.post('/actualiza-usuarios', isLoggedIn, function(req, res) {","\t\t","\t\t","\t\tconsole.log(\"SHEYLA->\"+req.user.local.nomUsuario);","\t\tconsole.log(\"req.body.username ->\"+req.body.username);","\t\tres.redirect('/profile');","\t\t","\t\t","\t\t","\t\t","\t});"]},{"start":{"row":176,"column":1},"end":{"row":226,"column":4},"action":"insert","lines":["app.post('/actualiza-usuarios', isLoggedIn, function(req, res) {","\t\t","\t\tconsole.log(\"SHEYLA->\"+req.user.local.nomUsuario);","\t\tconsole.log(\"req.body.username ->\"+req.body.username);","","\t\t","\t\t\t//Buscar el nombre de usuario que se ha introducido en el formulario ","\t\t\t\t\tUser.find({ 'nomUsuario' :  req.body.username }, function(err, user){","","\t\t\t\t\t\tconsole.log(user);","\t\t\t\t\t\t","\t\t\t\t\t\t\t//console.log(\"local.nomUsuario\"+local.nomUsuario);","\t\t\t\t\t\t\t//console.log(\"req.body.username\"+req.body.username);","\t\t\t\t\t\t","\t\t\t\t\t\t//si hay un usuario con ese nombre tendremos que mirar si es el mismo o un usuario diferente","\t\t\t\t\t\tif(user){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\t//si el ID no es el mismo es que ya existe un usuario con ese nombre","\t\t\t\t\t\t\tif(user.local._id != req.body.id){","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\t//Aquí sacaríamos los mensajes de error","\t\t\t\t\t\t\t\t//return done(null, false, req.flash('signupMessage', 'Ese usuario ya existe.'));","\t\t\t\t\t\t\t\tconsole.log(\"Ese usuario ya existe\");","\t\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t}else{","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t\tuser.local.nomUsuario = req.body.username;","\t\t\t\t\t\t\t\tconsole.log(\"Ese usuario esta libre\");","\t\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t\t","\t\t\t\t\t\t\t}","\t\t\t\t\t\t\t","\t\t\t\t\t\t//Si no hay ningún usuario con ese nombre ","\t\t\t\t\t\t}else if(!user){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\tuser.local.nomUsuario = req.body.username;","\t\t\t\t\t\t\tconsole.log(\"Ese usuario libre\");","\t\t\t\t\t\t\tres.redirect('/profile'/*, { message: req.flash('signupMessage')}*/);","\t\t\t\t\t\t\t","\t\t\t\t\t\t}else if(err){","\t\t\t\t\t\t\t","\t\t\t\t\t\t\tconsole.log(err);","\t\t\t\t\t\t\t","\t\t\t\t\t\t}","\t\t\t\t\t\t","\t\t\t\t\t};","","\t\t\t\t\t//res.redirect('/profile');","\t\t","\t});"]}]}],[{"group":"doc","deltas":[{"start":{"row":222,"column":5},"end":{"row":222,"column":6},"action":"insert","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":222,"column":5},"end":{"row":222,"column":6},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":222,"column":6},"end":{"row":222,"column":7},"action":"insert","lines":[")"]}]}]]},"ace":{"folds":[],"customSyntax":"javascript","scrolltop":2400,"scrollleft":0,"selection":{"start":{"row":183,"column":4},"end":{"row":183,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":170,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1421310335952,"hash":"1ce87f0c531eeaee3cd9f116f6d87d0b8c0ebd05"}