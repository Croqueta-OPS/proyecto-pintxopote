{"changed":true,"filter":false,"title":"routes.js","tooltip":"/app/routes.js","value":"\n","undoManager":{"mark":98,"position":100,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":8},"end":{"row":23,"column":9}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":9},"end":{"row":23,"column":10}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":10},"end":{"row":23,"column":11}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":11},"end":{"row":23,"column":12}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":12},"end":{"row":23,"column":13}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":13},"end":{"row":23,"column":15}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":3},"end":{"row":22,"column":4}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":2},"end":{"row":22,"column":3}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":23,"column":0},"end":{"row":23,"column":15}},"text":"\t\tconsole.log()"},{"action":"removeLines","range":{"start":{"row":21,"column":0},"end":{"row":23,"column":0}},"nl":"\n","lines":["\t\t","\t\tpintxoObjeto.find();"]},{"action":"removeText","range":{"start":{"row":20,"column":1},"end":{"row":20,"column":56}},"text":"\tvar pintxoObjeto = baseDatos.model('pintxos', Pintxo);"},{"action":"removeText","range":{"start":{"row":20,"column":1},"end":{"row":21,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":1}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":19,"column":2},"end":{"row":20,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":28},"end":{"row":18,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":5}},"text":"  \t\t\t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":5},"end":{"row":18,"column":6}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":6},"end":{"row":18,"column":7}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":7},"end":{"row":18,"column":8}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":8},"end":{"row":18,"column":9}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":8},"end":{"row":18,"column":9}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":8},"end":{"row":18,"column":9}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":9},"end":{"row":18,"column":10}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":10},"end":{"row":18,"column":11}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":11},"end":{"row":18,"column":12}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":12},"end":{"row":18,"column":13}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":12},"end":{"row":18,"column":13}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":12},"end":{"row":18,"column":13}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":13},"end":{"row":18,"column":14}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":14},"end":{"row":18,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":15},"end":{"row":18,"column":16}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":16},"end":{"row":18,"column":18}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":17},"end":{"row":18,"column":18}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":18},"end":{"row":18,"column":19}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":19},"end":{"row":18,"column":20}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":20},"end":{"row":18,"column":21}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":17},"end":{"row":18,"column":21}},"text":"pint"},{"action":"insertText","range":{"start":{"row":18,"column":17},"end":{"row":18,"column":24}},"text":"pintxos"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"text":";"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":24},"end":{"row":18,"column":25}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"text":"1"},{"action":"insertText","range":{"start":{"row":18,"column":26},"end":{"row":18,"column":27}},"text":"4"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":26},"end":{"row":18,"column":27}},"text":"4"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":24},"end":{"row":18,"column":25}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":24},"end":{"row":18,"column":25}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":26},"end":{"row":18,"column":27}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":27},"end":{"row":18,"column":28}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":28},"end":{"row":18,"column":29}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":29},"end":{"row":18,"column":30}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":30},"end":{"row":18,"column":31}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":31},"end":{"row":18,"column":33}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":32},"end":{"row":18,"column":33}},"text":"]"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":31},"end":{"row":18,"column":32}},"text":"["}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":31},"end":{"row":18,"column":33}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":33},"end":{"row":18,"column":34}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":33},"end":{"row":18,"column":34}},"text":"1"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":33},"end":{"row":18,"column":34}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":33},"end":{"row":18,"column":34}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":32},"end":{"row":18,"column":33}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":33},"end":{"row":18,"column":34}},"text":"]"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":32},"end":{"row":18,"column":33}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":31},"end":{"row":18,"column":32}},"text":"["}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":24},"end":{"row":18,"column":26}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":25},"end":{"row":18,"column":26}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"nl":"\n","lines":["\tvar baseDatos = require('../config/database.js');"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":13},"end":{"row":17,"column":16}},"text":"log"},{"action":"insertText","range":{"start":{"row":17,"column":13},"end":{"row":17,"column":14}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":14},"end":{"row":17,"column":15}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":15},"end":{"row":17,"column":16}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":13},"end":{"row":17,"column":16}},"text":"dir"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":13},"end":{"row":17,"column":14}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":14},"end":{"row":17,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":15},"end":{"row":17,"column":16}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":5},"end":{"row":18,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":18,"column":0},"end":{"row":18,"column":5}},"text":"  \t\t\t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":5},"end":{"row":17,"column":6}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":6},"end":{"row":17,"column":7}},"text":"f"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":7},"end":{"row":17,"column":9}},"text":"()"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":9},"end":{"row":17,"column":10}},"text":"{"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":10},"end":{"row":17,"column":11}},"text":"}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":10},"end":{"row":18,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":18,"column":0},"end":{"row":19,"column":0}},"lines":["  \t\t\t\t"]},{"action":"insertText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":5}},"text":"  \t\t\t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":9}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":9},"end":{"row":17,"column":10}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":10},"end":{"row":17,"column":11}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":11},"end":{"row":17,"column":12}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":12}},"text":"pint"},{"action":"insertText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":15}},"text":"pintxos"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":15},"end":{"row":17,"column":17}},"text":"[]"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":16},"end":{"row":17,"column":17}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":18},"end":{"row":17,"column":19}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":19},"end":{"row":17,"column":20}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":20},"end":{"row":17,"column":21}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":21},"end":{"row":17,"column":22}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":19},"end":{"row":17,"column":22}},"text":"nom"},{"action":"insertText","range":{"start":{"row":17,"column":19},"end":{"row":17,"column":25}},"text":"nombre"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":25},"end":{"row":17,"column":26}},"text":"!"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":26},"end":{"row":17,"column":27}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":27},"end":{"row":17,"column":29}},"text":"\"\""}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":20,"column":0},"end":{"row":21,"column":0}},"nl":"\n","lines":["  \t\t\tconsole.log(pintxos[0].nombre);"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":18,"column":6},"end":{"row":18,"column":42}},"text":"  \t\t\tconsole.log(pintxos[0].nombre);"},{"action":"insertText","range":{"start":{"row":18,"column":42},"end":{"row":19,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":42},"end":{"row":19,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":10},"end":{"row":18,"column":11}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":9},"end":{"row":18,"column":10}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":8},"end":{"row":18,"column":9}},"text":"\t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":7},"end":{"row":18,"column":8}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":18,"column":6},"end":{"row":18,"column":7}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":27},"end":{"row":17,"column":28}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":94,"column":0}},"nl":"\n","lines":["","module.exports = function(app, passport) {","","\tvar Pintxo = require('../app/models/pintxo');//modelo","\t// =====================================","\t// HOME PAGE (with login links) ========","\t// =====================================","\tapp.get('/', function(req, res) {","\t\tres.render('index.ejs'); // load the index.ejs file","\t\t","\t});","","\t app.get('/pintxos', function (require, response) {","","\t \tPintxo.find(function(err, pintxos) {"," \t\t\tif (err) return console.error(err);","  \t\t\tresponse.send(pintxos);","  \t\t\tif(pintxos[0].nombre!==\"\"){","  \t\t\t\tconsole.log(pintxos[0].nombre);","  \t\t\t}","\t\t});","\t\t","","\t});","\t","\t// =====================================","\t// LOGIN ===============================","\t// =====================================","\t// show the login form","\tapp.get('/login', function(req, res) {","","\t\t// render the page and pass in any flash data if it exists","\t\tres.render('login.ejs', { message: req.flash('loginMessage')}); ","\t});","","\t// process the login form","\t// app.post('/login', do all our passport stuff here);","","\t// =====================================","\t// SIGNUP ==============================","\t// =====================================","\t// show the signup form","\tapp.get('/signup', function(req, res) {","\t\t// render the page and pass in any flash data if it exists","\t\tres.render('signup.ejs', { message: req.flash('signupMessage')});","\t});","","\t// process the signup form","\t// app.post('/signup', do all our passport stuff here);","","\t// =====================================","\t// PROFILE SECTION =====================","\t// =====================================","\t// we will want this protected so you have to be logged in to visit","\t// we will use route middleware to verify this (the isLoggedIn function)","\tapp.get('/profile', isLoggedIn, function(req, res) {","\t\tres.render('profile.ejs', {","\t\t\tuser : req.user // get the user out of session and pass to template","\t\t});","\t});","","\t// =====================================","\t// LOGOUT ==============================","\t// =====================================","\tapp.get('/logout', function(req, res) {","\t\treq.logout();","\t\tres.redirect('/');","\t});","","\t// process the signup form","\tapp.post('/signup', passport.authenticate('local-signup', {","\t\tsuccessRedirect : '/profile', // redirect to the secure profile section","\t\tfailureRedirect : '/signup', // redirect back to the signup page if there is an error","\t\tfailureFlash : true // allow flash messages","\t}));","","\t// process the login form","\tapp.post('/login', passport.authenticate('local-login', {","\t\tsuccessRedirect : '/profile', // redirect to the secure profile section","\t\tfailureRedirect : '/login', // redirect back to the signup page if there is an error","\t\tfailureFlash : true // allow flash messages","\t}));","};","","// route middleware to make sure a user is logged in","function isLoggedIn(req, res, next) {","","\t// if user is authenticated in the session, carry on ","\tif (req.isAuthenticated())","\t\treturn next();","","\t// if they aren't redirect them to the home page","\tres.redirect('/');","}"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"text":"\n"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":0},"end":{"row":1,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1414751801664}